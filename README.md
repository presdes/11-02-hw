H/W for the lesson "Databases, their types" - Alexey Motorin

# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é "`–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Redis/Memcached`" - `–ú–æ—Ç–æ—Ä–∏–Ω –ê–ª–µ–∫—Å–µ–π`

## –ó–∞–¥–∞–Ω–∏–µ 1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

`–ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.`

`–ü—Ä–∏–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.`

---

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —É–ª—É—á—à–∏—Ç—å –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.**

**Memcached** –∏ **Redis** —Ä–µ—à–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∑–∞–¥–∞—á –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤–æ–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º.

## 1.1\. Memcached: –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π –∫–µ—à

`Memcached¬π - –ü—Ä–æ—Å—Ç–∞—è –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ (key-value) –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –°–æ–∑–¥–∞–Ω–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∑–∞ —Å—á—ë—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é —è–≤–ª—è–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ persistence (–¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ).`

¬π - `–í IT-—Å–æ–æ–±—â–µ—Å—Ç–≤–µ –ø—Ä–∏–Ω—è—Ç–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ Memcached —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–µ–π. –ù–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –æ–Ω –±—ã–ª —Å–æ–∑–¥–∞–Ω –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–≤–Ω–æ (–ø–µ—Ä–≤—ã–π –≤—ã–ø—É—Å–∫ —Å–æ—Å—Ç–æ—è–ª—Å—è 22 –º–∞—è 2003 –≥–æ–¥–∞), –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.` üëâ[–ü–æ–¥—Ä–æ–±–Ω–µ–µ, –ø–æ—á–µ–º—É Memcached –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º...](/memcached_its_ok.md)

`–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Memcached –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.`

**–†–µ—à–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### ‚ë† –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
* **–ü—Ä–æ–±–ª–µ–º–∞**: –ß–∞—Å—Ç—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ).
* **–†–µ—à–µ–Ω–∏–µ**: –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Memcached.

```python
# –ü—Ä–∏–º–µ—Ä (Python + Django)
from django.core.cache import cache

def get_top_products():
    cached_data = cache.get("top_products")
    if not cached_data:
        cached_data = db.query("SELECT * FROM products ORDER BY sales DESC LIMIT 10")
        cache.set("top_products", cached_data, timeout=3600)  # –ö–µ—à –Ω–∞ 1 —á–∞—Å
    return cached_data
```    

‚úç `–í –ø—Ä–∏–º–µ—Ä–µ, –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏—è —Å–¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –ë–î, —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞, –∞ —á–µ—Ä–µ–∑ —á–∞—Å –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.`

### ‚ë° –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

* **–ü—Ä–æ–±–ª–µ–º–∞**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ —Ñ–∞–π–ª–∞—Ö –∏–ª–∏ –ë–î –º–µ–¥–ª–µ–Ω–Ω–æ–µ.
* **–†–µ—à–µ–Ω–∏–µ**: Memcached —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏–∏ –≤ RAM (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø).

```nginx
# –ü—Ä–∏–º–µ—Ä –¥–ª—è PHP (php.ini)
session.save_handler = memcached
session.save_path = "127.0.0.1:11211"
```

‚úç `–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Å—Å–∏—è–º–∏ –≤ PHP-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Å—Å–∏–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å` –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.

### ‚ë¢ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API-–æ—Ç–≤–µ—Ç–æ–≤

* **–ü—Ä–æ–±–ª–µ–º–∞**: –í–Ω–µ—à–Ω–∏–µ API –∏–º–µ—é—Ç –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç).
* **–†–µ—à–µ–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ 5‚Äì10 –º–∏–Ω—É—Ç –≤ Memcached.

```python
def get_exchange_rates():
    rates = cache.get("usd_to_eur")
    if not rates:
        rates = api.fetch("https://api.exchangerate.host/latest")
        cache.set("usd_to_eur", rates, timeout=300)  # 5 –º–∏–Ω—É—Ç
    return rates
```

‚úç `–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∞ Python –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API https://api.exchangerate.host/latest, –¥–µ–ª–∞–µ—Ç—Å—è GET-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω ‚Äúcache-aside‚Äù, –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ–¥ –∫–ª—é—á–æ–º ‚Äúusd_to_eur‚Äù, –∞ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞: 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫—É–Ω–¥).`

‚úç `–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—É—Ç—ë–º –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ API, –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ –∫—ç—à–∞.
–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö - –∫—É—Ä—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π.`

### ‚ë£ –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

* **–ü—Ä–æ–±–ª–µ–º–∞:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-—Å—Ç—Ä–∞–Ω–∏—Ü ¬´–Ω–∞ –ª–µ—Ç—É¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–ª–æ–≥–∏).
* **–†–µ—à–µ–Ω–∏–µ:** –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π HTML.

```python
# Flask + Memcached
@app.route("/blog/<id>")
def blog_post(id):
    html = cache.get(f"post_{id}")
    if not html:
        post = db.get_blog_post(id)
        html = render_template("post.html", post=post)
        cache.set(f"post_{id}", html, timeout=86400)  # 1 –¥–µ–Ω—å
    return html
```

‚úç `–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è HTML –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫—ç—à, —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML. –ß–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.`

---

## 1.2\. Redis: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ + in-memory –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

`Redis - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è in-memory –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Ç–æ–ª—å–∫–æ –∫—ç—à). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö: —Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏, —Ö–µ—à–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞. –ï—Å—Ç—å persistence (–º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫).`

**–†–µ—à–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### ‚ë† –°–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

* **–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω—ã —Ä–µ–π—Ç–∏–Ω–≥–∏, –æ—á–µ—Ä–µ–¥–∏, –≥—Ä–∞—Ñ—ã.
* **–†–µ—à–µ–Ω–∏–µ**: Redis –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ö–µ—à–∏, —Å–ø–∏—Å–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞.

```python
# –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä)
redis.zadd("leaderboard", {"Alice": 100, "Bob": 85, "Charlie": 120})

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-3
top_players = redis.zrevrange("leaderboard", 0, 2)  # ['Charlie', 'Alice', 'Bob']
```

### ‚ë° Pub/Sub (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)

* **–ü—Ä–æ–±–ª–µ–º–∞**: –ß–∞—Ç –∏–ª–∏ live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –æ–ø—Ä–æ—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞.
* **–†–µ—à–µ–Ω–∏–µ**: Redis Pub/Sub.

```python
# –ö–∞–Ω–∞–ª "notifications"
redis.publish("notifications", "–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!")

# –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
pubsub = redis.pubsub()
pubsub.subscribe("notifications")
```

### ‚ë¢ –ö–µ—à —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é

* **–ü—Ä–æ–±–ª–µ–º–∞**: Memcached —Ç–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ.
* **–†–µ—à–µ–Ω–∏–µ**: Redis —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ (**RDB**/**AOF**).

```bash
# –í redis.conf
save 900 1       # –°–æ—Ö—Ä–∞–Ω—è—Ç—å, –µ—Å–ª–∏ 1 –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ 15 –º–∏–Ω
appendonly yes   # –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

### ‚ë£ –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

* **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞).
* **–†–µ—à–µ–Ω–∏–µ**: Redis-–ª–æ–∫–∏ (**SETNX**).

```python
# –ü—Ä–∏–º–µ—Ä –Ω–∞ python
def process_payment(order_id):
    lock = redis.setnx(f"lock:{order_id}", "1", ex=30)  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 30 —Å–µ–∫
    if not lock:
        raise Exception("–û–ø–µ—Ä–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!")
    try:
        make_payment(order_id)
    finally:
        redis.delete(f"lock:{order_id}")     
```

### ‚ë§ –ì–µ–æ–¥–∞–Ω–Ω—ã–µ

* **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–º–∞–≥–∞–∑–∏–Ω—ã, —Ç–∞–∫—Å–∏).
* **–†–µ—à–µ–Ω–∏–µ**: Redis GEO API.

```python
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
redis.geoadd("shops", -74.0059, 40.7128, "NYC Store")

# –ù–∞–π—Ç–∏ –º–∞–≥–∞–∑–∏–Ω—ã –≤ —Ä–∞–¥–∏—É—Å–µ 10 –∫–º
redis.georadius("shops", -74.0059, 40.7128, 10, unit="km")
```

## **–ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**

| **–ü—Ä–æ–±–ª–µ–º–∞** | **Memcached** | **Redis** |
| --- | --- | --- |
| –ü—Ä–æ—Å—Ç–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –õ—É—á—à–µ | ‚ö†Ô∏è –ú–æ–∂–Ω–æ |
| –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚úÖ | ‚úÖ |
| –°–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö | ‚ùå –ù–µ—Ç | ‚úÖ |
| –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (Celery) | ‚ùå | ‚úÖ |
| Pub/Sub (–≤–µ–±—Å–æ–∫–µ—Ç—ã) | ‚ùå | ‚úÖ |
| –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | ‚ùå | ‚úÖ |
| –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ | ‚ùå | ‚úÖ |

+ **Memcached** ‚Äî –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ, –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫–µ—à–∞.
+ **Redis** ‚Äî –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–û–±–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ –∏ —ç—Ç–æ –¥–∞—ë—Ç —Ä—è–¥ üëâ[–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤](/advantages_of_using_caching.md).

*   **Memcached** ‚Äî –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).
*   **Redis** ‚Äî –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—Å–µ—Å—Å–∏–∏, –æ—á–µ—Ä–µ–¥–∏, –≥–µ–æ–¥–∞–Ω–Ω—ã–µ).

–û–±–∞ —Ä–µ—à–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (**Facebook**, **Twitter**, **GitHub** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–∞).

**Redis** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –±–æ–ª–µ–µ –≥–∏–±–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –±–æ–ª–µ–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –Ω–æ –≤ –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª–∏ –º–æ–∂–µ—Ç —É—Å—Ç—É–ø–∞—Ç—å –≤ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ **Memcached**.

üëâ&nbsp;[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Memcached –∏ Redis](/Memcached&Redis_features.md).

## 1.3\. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç—Å—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

1.  **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î:** –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.

2.  **–í—ã—Å–æ–∫–∏–µ –ø–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏:** –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

3.  **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:** –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –º–µ–¥–ª–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º.

4.  **–ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º:** —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, üëâ&nbsp;[–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ](/horizontal_scaling.md).


## 1.4\. –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Ä–µ—à–∞–µ–º—ã—Ö –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–∏—Å–∞—Ö:

1.  **E-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:**
	*   –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤
	*   –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω –ø–æ–∫—É–ø–æ–∫
	*   –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2.  **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏:**
    *   –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –ª–µ–Ω—Ç—ã
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
    *   –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

3.  **–ò–≥—Ä–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π
    *   –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
    *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º

---

## –ó–∞–¥–∞–Ω–∏–µ 2 Memcached

`–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ memcached.`

`–ü—Ä–∏–≤–µ–¥–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç systemctl status memcached, –≥–¥–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, —á—Ç–æ memcached –∑–∞–ø—É—â–µ–Ω.`

---

![Screenshot bash: sudo systemctl status memcached](https://github.com/presdes/11-02-hw/blob/main/img/2025-04-01_13-50-40.png "Screenshot bash: sudo systemctl status memcached")

---

## –ó–∞–¥–∞–Ω–∏–µ 3. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ TTL –≤ Memcached

`–ó–∞–ø–∏—à–∏—Ç–µ –≤ memcached –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π —Å –ª—é–±—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—Å—Ç–∞–≤–ª–µ–Ω TTL 5.`

`–ü—Ä–∏–≤–µ–¥–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤–∏–¥–Ω–æ, —á—Ç–æ —Å–ø—É—Å—Ç—è 5 —Å–µ–∫—É–Ω–¥ –∫–ª—é—á–∏ —É–¥–∞–ª–∏–ª–∏—Å—å –∏–∑ –±–∞–∑—ã.`

---

![Screenshot for Task 3. TTL deletion in Memcached](https://github.com/presdes/11-02-hw/blob/main/img/2025-04-01_19-19-31.png "Screenshot for Task 3. TTL deletion in Memcached")

‚úç `–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π 3-—Ö –∫–ª—é—á–µ–π –≤–∏–¥–∏–º, —á—Ç–æ —Å–ø—É—Å—Ç—è 5 —Å–µ–∫—É–Ω–¥ "–¥–æ–∂–∏–ª" —Ç–æ–ª—å–∫–æ –∫–ª—é—á —Å ttl 300`

---

## –ó–∞–¥–∞–Ω–∏–µ 4. –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ Redis

`–ó–∞–ø–∏—à–∏—Ç–µ –≤ Redis –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π —Å –ª—é–±—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.`

`–ß–µ—Ä–µ–∑ redis-cli –¥–æ—Å—Ç–∞–Ω—å—Ç–µ –≤—Å–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã, –ø—Ä–∏–≤–µ–¥–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.`

---

![Screenshot for Task 4. Writing data to Redis](https://github.com/presdes/11-02-hw/blob/main/img/2025-04-01_22-00-22.png "Screenshot for Task 4. Writing data to Redis")

‚úç `Redis –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–π –∫–æ–º–∞–Ω–¥—ã GET ALL, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å KEYS * –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–π (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤ production, –±–∞–∑–∞—Ö, —Ç.–∫ –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω—ã–º –Ω–∞ –±–æ–ª—å—à–∏—Ö –ë–î!), –∑–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ü–∏–∫–ª –∏–ª–∏ MGET.`

---

## –ó–∞–¥–∞–Ω–∏–µ 5*. –†–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞–º–∏

`–ó–∞–ø–∏—à–∏—Ç–µ –≤ Redis –∫–ª—é—á key5 —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Ç–∏–ø–∞ "int" —Ä–∞–≤–Ω—ã–º —á–∏—Å–ª—É 5. –£–≤–µ–ª–∏—á—å—Ç–µ –µ–≥–æ –Ω–∞ 5, —á—Ç–æ–±—ã –≤ –∏—Ç–æ–≥–µ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –ª–µ–∂–∞–ª–æ —á–∏—Å–ª–æ 10.`

`–ü—Ä–∏–≤–µ–¥–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç, –≥–¥–µ –±—É–¥—É—Ç –ø—Ä–æ–¥–µ–ª–∞–Ω—ã –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ key5 —Å—Ç–∞–ª–æ —Ä–∞–≤–Ω–æ 10.`

![Screenshot for Task 5. Working with numbers in redis](https://github.com/presdes/11-02-hw/blob/main/img/2025-04-01_22-24-17.png "Screenshot for Task 5. Working with numbers in redis")

‚úç `Redis –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∏—Å–ª–∞ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Å—Ä–µ–¥. –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è - INCRBY (–µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —á–∏—Å–ª–æ ‚Äî –≤–µ—Ä–Ω—ë—Ç—Å—è –æ—à–∏–±–∫–∞).`

---
