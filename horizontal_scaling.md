# Горизонтальное масштабирование в системах кэширования (Redis, Memcached)

> Горизонтальное масштабирование (scaling out) — это подход к увеличению производительности системы за счёт добавления дополнительных серверов (узлов), а не за счёт наращивания мощности одного сервера (вертикальное масштабирование).
> 

**В контексте кэширующих систем (Redis, Memcached) это означает распределение данных и нагрузки между несколькими серверами для**:

* Увеличения объёма кэша (больше памяти в сумме).
* Повышения отказоустойчивости (если один узел упадёт, другие продолжат работу).
* Роста пропускной способности (больше запросов в секунду).

## Как работает горизонтальное масштабирование в Redis и Memcached?

1. **Memcached**

**Memcached изначально поддерживает горизонтальное масштабирование через клиентскую логику**:
* Клиент (приложение) распределяет данные между серверами Memcached с помощью consistent hashing (алгоритм распределения ключей).
* Каждый сервер Memcached работает независимо, не зная о других.
* Если один сервер падает, его ключи просто перераспределяются (но теряются, так как Memcached не реплицирует данные).

**Плюсы:**<br>
✅ Простота настройки.<br>
✅ Высокая скорость (нет накладных расходов на синхронизацию).

**Минусы:**<br>
❌ Нет репликации (потеря данных при падении сервера).<br>
❌ Нет встроенной балансировки (зависит от клиента).

2. **Redis**

**Redis поддерживает горизонтальное масштабирование через Redis Cluster (начиная с версии 3.0):**
* Данные автоматически шардируются (разбиваются) между узлами.
* Каждый узел отвечает за определённый диапазон хеш-слотов (всего 16384 слота).
* Репликация данных (master-slave) для отказоустойчивости.

**Плюсы**:<br>
✅ Автоматическое распределение данных.<br>
✅ Репликация (данные не теряются при падении мастера).<br>
✅ Поддержка resharding (перераспределение слотов при добавлении узлов).

**Минусы**:<br>
❌ Сложнее настраивать, чем Memcached.<br>
❌ Некоторые операции (например, транзакции) ограничены в кластере.

## Сравнение подходов

| **Характеристика** | **Memcached (клиентское шардирование)** | **Redis Cluster (встроенное шардирование)** |
| --- | --- | --- |
| **Распределение** | Клиент решает, куда писать | Автоматическое (по слотам) |
| **Репликация** | Нет | Есть (master-slave) |
| **Отказоустойчивость** | Низкая (потеря данных при падении) | Высокая (слейв заменяет мастера) |
| **Сложность** | Просто | Сложнее |
| **Использование** | Простые кэши | Сложные сценарии (персистентность) |

## Когда что выбирать?

**Memcached** — если нужен простой, быстрый, распределённый кэш без сложных функций.

**Redis Cluster** — если важны отказоустойчивость, персистентность и сложные структуры данных.

---

`Домашнее задание к занятию "Кеширование Redis/memcached" - Моторин Алексей`<br>
[Вернуться назад](/README.md)